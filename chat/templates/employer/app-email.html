<!DOCTYPE html>
{% load static %}
{% load call_methods %}
{#{% load  %}#}
{% load humanize %}
<html class="loading" lang="en" data-textdirection="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">

    <title>{{ title|title }}</title>
    <link rel="apple-touch-icon" href="{% static 'email/images/ico/apple-icon-120.png' %}">

    <link rel="shortcut icon" type="image/x-icon" href="https://pixinvent.com/modern-admin-clean-bootstrap-4-dashboard-html-template/app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'email/vendors/css/vendors.min.css' %}">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/bootstrap-extended.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/colors.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/components.min.css' %}">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/core/menu/menu-types/horizontal-menu.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/core/colors/palette-gradient.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'email/css/pages/app-email.min.css' %}">
    <!-- END: Page CSS-->
    <link href="https://cdn.lineicons.com/2.0/LineIcons.css" rel="stylesheet">
    <!-- BEGIN: Custom CSS-->

    <script src="https://cdn.ckeditor.com/ckeditor5/21.0.0/classic/ckeditor.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
     <link rel="stylesheet" type="text/css" href="{% static 'email/style.css' %}">

    <!-- END: Custom CSS-->
  </head>
  <!-- END: Head-->

  <!-- BEGIN: Body-->
  <body class="horizontal-layout horizontal-menu horizontal-menu-padding content-left-sidebar email-application " style="padding-top: 0px !important;" data-open="click" data-menu="horizontal-menu" data-col="content-left-sidebar">


    <!-- BEGIN: Content-->
    <div style="height: 100% !important;" class="app-content content">
      <div class="sidebar-left">
        <div class="sidebar">
            <div style="height: 100% !important;" class="sidebar-content email-app-sidebar d-flex">
              <!-- sidebar close icon -->
              <span class="sidebar-close-icon">
                <i class="lni lni-close"></i>
              </span>
              <!-- sidebar close icon -->
              <div class="email-app-menu">
                <div class="form-group form-group-compose">
                  <!-- compose button  -->
                  <button type="button" class="btn btn-success btn-glow btn-block my-2 compose-btn">
                    <i class="lni lni-comments-alt"></i>
                    Compose
                  </button>
                </div>
                <div class="sidebar-menu-list">
                  <!-- sidebar menu  -->
                  <div class="list-group list-group-messages tabt" >
                    <a  onclick="openCity(event, 'All')" id="defaultOpen" class="tablinks list-group-item active">
                      <div class="d-inline mr-25">
                        <i class="lni lni-grid-alt"></i>
                      </div>
                      All
                      <span class="badge badge-success badge-pill badge-round float-right">{{ messages_count }}</span>
                    </a>
                    <a  onclick="openCity(event, 'Sent')" class="tablinks list-group-item">
                      <div class="d-inline mr-25">
                        <i class="lni lni-play"></i>
                      </div>
                      Sent
                      <span class="badge badge-success badge-pill badge-round float-right">{{ sentmessages|length }}</span>
                    </a>
                    <a  onclick="openCity(event, 'Inbox')" class="tablinks list-group-item">
                      <div class="d-inline mr-25">
                        <i class="lni lni-inbox"></i>
                      </div>
                      Inbox
                      <span class="badge badge-success badge-pill badge-round float-right">{{ inboxmessages|length }}</span>
                    </a>
                    <a onclick="openCity(event, 'Starred')" class="tablinks list-group-item">
                      <div class="d-inline mr-25">
                        <i class="lni lni-star"></i>
                      </div>
                      Starred
                      <span class="badge badge-success badge-pill badge-round float-right">{{ starredmessages|length }}</span>
                    </a>
                    <a onclick="openCity(event, 'Trash')" class="tablinks list-group-item">
                      <div class="d-inline mr-25">
                        <i class="lni lni-trash"></i>
                      </div>
                      Trash
                      <span class="badge badge-success badge-pill badge-round float-right">{{ trashmessages|length }}</span>
                    </a>
                  </div>
                  <!-- sidebar menu  end-->

                  <!-- sidebar label start -->
                  <label class="sidebar-label">Labels</label>
                  <div class="list-group list-group-labels ">
                    <a onclick="openCity(event, 'Product')" href="#" class="tablinks list-group-item d-flex justify-content-between align-items-center">
                      Product ({{ product_label|length }})
                      <span class="bullet bullet-success bullet-sm"></span>
                    </a>
                    <a onclick="openCity(event, 'Work')"  href="#" class="tablinks list-group-item d-flex justify-content-between align-items-center">
                      Work ({{ work_label|length }})
                      <span class="bullet bullet-primary bullet-sm"></span>
                    </a>
                    <a onclick="openCity(event, 'Misc')"  href="#" class="tablinks list-group-item d-flex justify-content-between align-items-center">
                      Misc ({{ misc_label|length }})
                      <span class="bullet bullet-warning bullet-sm"></span>
                    </a>
                    <a onclick="openCity(event, 'Undefined')"  href="#" class="tablinks list-group-item d-flex justify-content-between align-items-center">
                      Undefined ({{ undefined_label|length }})
                      <span class="bullet bullet-secondary bullet-sm"></span>
                    </a>
                  </div>
                  <!-- sidebar label end -->
                </div>
              </div>
            </div>
            <!-- User new mail right area -->
            <div class="compose-new-mail-sidebar">
              <div class="card mb-0 shadow-none quill-wrapper p-0" id="compose-form" >
                <div class="card-header">
                  <h3 class="card-title" id="emailCompose">New Message</h3>
                  <button type="button" class="close close-icon">
                   <i class="lni lni-close"></i>
                  </button>
                </div>
                <!-- form start -->
                <form action="{% url 'Chat:messages' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                  <div class="card-footer border-0 d-flex justify-content-end pt-0">
                        <button type="reset" class="btn btn-danger cancel-btn mr-1">
                          <i class="lni lni-close mr-25"></i>
                          <span class="d-sm-inline d-none">Cancel</span>
                        </button>
                        <button type="submit" class="btn-send btn btn-success ">
                          <i class='lni lni-play mr-25'></i>
                            <span class="d-sm-inline d-none">Send</span>
                        </button>
                      </div>
                  <div class="card-content">
                    <div class="card-body pt-0">
                          <div class="form-group">
                            <label for="exampleFormControlSelect1">Choose Recipient</label>
                            <select style="border-color: #6e6e6e" class="form-control js-example-basic-multiple" id="exampleFormControlSelect1" name="recievers" multiple="multiple">
                                {% for customer in customers %}
                                  <option value="{{ customer.customer.id }}">{{ customer.customer.first_name|title }} {{ customer.customer.last_name|title }}</option>
                                {% endfor %}
                            </select>
                          </div>
                          <div class="form-group">
                            <label for="exampleFormControlSelect2">Label</label>
                            <select name="label" class="form-control js-example-basic-single" id="exampleFormControlSelect2">
                              <option value="Product">Product</option>
                              <option value="Misc">Miscellaneous</option>
                              <option value="Work">Work</option>
                            </select>
                          </div>
                          <div class="form-label-group mb-1">
                               <label for="emailSubject">Subject</label>
                              <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                          </div>
                          <div class="form-group mt-2">
                            <label for="emailAttach">File</label>
                            <div class="custom-file">
                              <input name="filee" type="file" class="custom-file-inputt" id="customFile">
            {#                          <label class="custom-file-label" for="customFile">Choose file</label>#}
                            </div>
                          </div>
                          <div class="form-label-group mb-1" style="height: 120px; position:relative;">
                            <label for="editor">Message</label>
                            <textarea style="height: 100px;" id="editor" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                          </div>
                          <script>
                              ClassicEditor
                                .create( document.querySelector( '#editor' ) ,{
                                    removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                    toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                })
                                .catch( error => {
                                    console.error( error );
                                } );
                        </script>
                    </div>
                  </div>
                </form>
                <!-- form start end-->
              </div>
            </div>
            <!--/ User Chat profile right area -->
        </div>
      </div>
      <div style="height: 100%;" class="content-right">
        <div style="height: 100%;" class="content-overlay"></div>

        <div id="All"  style="height: 100%;" class="tabcontentt content-wrapper active show">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Sent"  style="height: 100%;" class=" tabcontentt content-wrapper">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>
            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list list-group" style="height: 100%;">
                    <ul class="users-list-wrapper media-list">
                      <li class="media mail-read">
                        <div class="user-action">
                          <div class="checkbox-con mr-25">
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" id="checkboxsmall1">
                              <label class="custom-control-label" for="checkboxsmall1"></label>
                            </div>
                          </div>
                          <span class="favorite warning">
                            <i class="lni lni-star"></i>
                          </span>
                        </div>
                        <div class="pr-50">
                          <div class="avatar">
                            <img src="{% static 'email/images/portrait/small/avatar-s-20.png' %}" alt="avtar img holder">
                          </div>
                        </div>
                        <div class="media-body">
                          <div class="user-details">
                            <div class="mail-items">
                              <span class="list-group-item-text text-truncate">Open source project public release üëç</span>
                            </div>
                            <div class="mail-meta-item">
                              <span class="float-right">
                                <span class="mail-date">4:14 AM</span>
                              </span>
                            </div>
                          </div>
                          <div class="mail-message">
                            <p class="list-group-item-text truncate mb-0">
                              Hey John, bah kivu decrete epanorthotic unnotched
                              Argyroneta nonius veratrine preimaginary
                            </p>
                            <div class="mail-meta-item">
                              <span class="float-right">
                                <span class="bullet bullet-success bullet-sm"></span>
                              </span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="media mail-read">
                        <div class="user-action">
                          <div class="checkbox-con mr-25">
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" id="checkboxsmall2">
                              <label class="custom-control-label" for="checkboxsmall2"></label>
                            </div>
                          </div>
                          <span class="favorite"><i class="lni lni-star"></i></span>
                        </div>
                        <div class="pr-50">
                          <div class="avatar">
                            <img class="rounded-circle" src="{% static 'email/images/portrait/small/avatar-s-20.png' %}" alt="Generic placeholder image">
                          </div>
                        </div>
                        <div class="media-body">
                          <div class="user-details">
                            <div class="mail-items">
                              <span class="list-group-item-text text-truncate">Ecommerce website Paypal integration üòÉ</span>
                            </div>
                            <div class="mail-meta-item">
                              <span class="float-right">
                                <span class="mail-date">2:15 AM</span>
                              </span>
                            </div>
                          </div>
                          <div class="mail-message">
                            <p class="list-group-item-text mb-0 truncate">
                              We will start the new application development soon once
                              this will be completed.
                            </p>
                            <div class="mail-meta-item">
                              <span class="float-right">
                                <span class="bullet bullet-danger bullet-sm"></span>
                              </span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="media">
                        <div class="user-action">
                          <div class="checkbox-con mr-25">
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" id="checkboxsmall3">
                              <label class="custom-control-label" for="checkboxsmall3"></label>
                            </div>
                          </div>
                          <span class="favorite">
                            <i class="lni lni-star"></i>
                          </span>
                        </div>
                        <div class="pr-50">
                          <div class="avatar">
                            <img class="rounded-circle" src="{% static 'email/images/portrait/small/avatar-s-20.png' %}"
                              alt="Generic placeholder image">
                          </div>
                        </div>
                        <div class="media-body">
                          <div class="user-details">
                            <div class="mail-items">
                              <span class="list-group-item-text text-truncate">How To Set Intentions That Energize You</span>
                            </div>
                            <div class="mail-meta-item">
                              <span class="float-right">
                                <span class="mail-date">2:15 AM</span>
                              </span>
                            </div>
                          </div>
                          <div class="mail-message">
                            <p class="list-group-item-text mb-0 truncate">
                              I will provide you more details after this Saturday. Hope
                              that will be fine for you..
                            </p>
                            <div class="mail-meta-item">
                              <span class="float-right d-flex align-items-center">
                                <i class="ft-paperclip mr-50"></i>
                                <span class="bullet bullet-success bullet-sm"></span>
                              </span>
                            </div>
                          </div>
                        </div>
                      </li>
                      <li class="media">
                        <div class="user-action">
                          <div class="checkbox-con mr-25">
                            <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" id="checkboxsmall4">
                              <label class="custom-control-label" for="checkboxsmall4"></label>
                            </div>
                          </div>
                          <span class="favorite">
                            <i class="lni lni-star"></i>
                          </span>
                        </div>
                        <div class="pr-50">
                          <div class="avatar">
                            <img class="rounded-circle" src="{% static 'email/images/portrait/small/avatar-s-20.png' %}"
                              alt="Generic placeholder image">
                          </div>
                        </div>
                        <div class="media-body">
                          <div class="user-details">
                            <div class="mail-items">
                              <span class="list-group-item-text text-truncate">Harness The Power Of Words In Your Life</span>
                            </div>
                            <div class="mail-meta-item">
                              <span class="float-right">
                                <span class="mail-date">Yesterday</span>
                              </span>
                            </div>
                          </div>
                          <div class="mail-message">
                            <p class="list-group-item-text text-truncate mb-0">
                              When the equation, first to ability the forwards, the a but travelling, outlines sentinels
                              bad expand to goodness....
                            </p>
                            <div class="mail-meta-item">
                              <span class="float-right d-flex align-items-center">
                                <i class="ft-paperclip mr-50"></i>
                                <span class="bullet bullet-warning bullet-sm"></span>
                              </span>
                            </div>
                          </div>
                        </div>
                      </li>
                    </ul>
                    <!-- email user list end -->

                    <!-- no result when nothing to show on list -->
                    <div class="no-results">
                      <i class="ft-info font-large-2"></i>
                      <h5>No Items Found</h5>
                    </div>
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->

              <!-- Detailed Email View -->
              <div class="email-app-details">
                <!-- email detail view header -->
                <div class="email-detail-header">
                  <div class="email-header-left d-flex align-items-center mb-1">
                    <span class="go-back mr-50">
                      <i class="lni lni-chevron-left-circle"></i>
                    </span>
                    <h5 class="email-detail-title font-weight-normal mb-0">
                      Advertising Internet Online
                      <span class="badge badge-light-danger badge-pill ml-1">PRODUCT</span>
                    </h5>
                  </div>
                  <div class="email-header-right mb-1 ml-2 pl-1">
                    <ul class="list-inline m-0">
                      <li class="list-inline-item">
                        <button class="btn btn-icon action-icon">
                          <i class="lni lni-trash"></i>
                        </button>
                      </li>
                      <li class="list-inline-item">
                        <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                      </li>
                      <li class="list-inline-item">
                        <button class="btn btn-icon email-pagination-prev action-icon">
                          <i class="lni lni-chevron-left-circle"></i>
                        </button>
                      </li>
                      <li class="list-inline-item">
                        <button class="btn btn-icon email-pagination-next action-icon">
                          <i class="lni lni-chevron-right-circle"></i>
                        </button>
                      </li>
                    </ul>
                  </div>
                </div>
                <!-- email detail view header end-->
                <div class="email-scroll-area">
                  <!-- email details  -->
                  <div class="row">
                    <div class="col-12">
                      <div class="collapsible email-detail-head">
                        <div class="card collapse-header" role="tablist">
                          <div id="headingCollapse5" class="card-header d-flex justify-content-between align-items-center"
                            data-toggle="collapse" role="tab" data-target="#collapse5" aria-expanded="false"
                            aria-controls="collapse5">
                            <div class="collapse-title media">
                              <div class="pr-1">
                                <div class="avatar mr-75">
                                  <img src="{% static 'email/images/portrait/small/avatar-s-18.png' %}" alt="avtar img holder"
                                    width="30" height="30">
                                </div>
                              </div>
                              <div class="media-body mt-25">
                                <span class="text-primary">Elnora Reese</span>
                                <span class="d-sm-inline d-none"> &lt;elnora@gmail.com&gt;</span>
                                <small class="text-muted d-block">to Lois Jimenez</small>
                              </div>
                            </div>
                            <div class="information d-sm-flex d-none align-items-center">
                              <small class="text-muted mr-50">15 Jul 2019, 10:30</small>
                              <span class="favorite">
                                <i class="ft-star mr-25"></i>
                              </span>
                              <div class="dropdown">
                                <a href="#" class="dropdown-toggle" id="fisrt-open-submenu" data-toggle="dropdown"
                                  aria-haspopup="true" aria-expanded="false">
                                  <i class='ft-more-vertical mr-0'></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="fisrt-open-submenu">
                                  <a href="#" class="dropdown-item mail-reply">
                                    <i class='ft-share-2'></i>
                                    Reply
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class='ft-corner-up-right'></i>
                                    Forward
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class='ft-info'></i>
                                    Report Spam
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div id="collapse5" role="tabpanel" aria-labelledby="headingCollapse5" class="collapse">
                            <div class="card-content">
                              <div class="card-body py-1">
                                <p class="text-bold-500">Greetings!</p>
                                <p>
                                  Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been
                                  the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                                  type and scrambled it to make a type specimen book.
                                </p>
                                <p>
                                  It has survived not only five centuries, but also the leap into electronic typesetting, remaining
                                  essentially unchanged.
                                </p>
                                <p class="mb-0">Sincerely yours,</p>
                                <p class="text-bold-500">Envato Design Team</p>
                              </div>
                              <div class="card-footer pt-0 border-top">
                                <label class="sidebar-label">Attached Files</label>
                                <ul class="list-unstyled mb-0">
                                  <li class="cursor-pointer pb-25">
                                    <img src="../../../app-assets/images/icons/psd.png" height="30" alt="psd.png">
                                    <small class="text-muted ml-1 attchement-text">uikit-design.psd</small>
                                  </li>
                                  <li class="cursor-pointer">
                                    <img src="../../../app-assets/images/icons/sketch.png" height="30" alt="sketch.png">
                                    <small class="text-muted ml-1 attchement-text">uikit-design.sketch</small>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="card collapse-header" role="tablist">
                          <div id="headingCollapse6" class="card-header d-flex justify-content-between align-items-center"
                            data-toggle="collapse" role="tab" data-target="#collapse6" aria-expanded="false"
                            aria-controls="collapse6">
                            <div class="collapse-title media">
                              <div class="pr-1">
                                <div class="avatar mr-75">
                                  <img src="../../../app-assets/images/portrait/small/avatar-s-19.png" alt="avtar img holder"
                                    width="30" height="30">
                                </div>
                              </div>
                              <div class="media-body mt-25">
                                <span class="text-primary">Lois Jimenez </span>
                                <span class="d-sm-inline d-none"> &lt;lois_jim@gmail.com&gt;</span>
                                <small class="text-muted d-block">to Elnora Reese</small>
                              </div>
                            </div>
                            <div class="information d-sm-flex d-none align-items-center">
                              <i class='ft-paperclip mr-50'></i>
                              <small class="text-muted mr-50">10 Jul 2019, 10:30</small>
                              <span class="favorite">
                                <i class="ft-star mr-25"></i>
                              </span>
                              <div class="dropdown">
                                <a href="#" class="dropdown-toggle" id="second-open-submenu" data-toggle="dropdown"
                                  aria-haspopup="true" aria-expanded="false">
                                  <i class='ft-more-vertical mr-0'></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                  <a href="#" class="dropdown-item mail-reply">
                                    <i class='ft-share-2'></i>
                                    Reply
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class='ft-corner-up-right'></i>
                                    Forward
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class='ft-info'></i>
                                    Report Spam
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div id="collapse6" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse">
                            <div class="card-content">
                              <div class="card-body py-1">
                                <p class="text-bold-500">Greetings!</p>
                                <p>
                                  Successful businesses have many things in common, today we‚Äôll look at the big ‚ÄòR‚Äôof recognition
                                  and how a digital advertising network may help. Recognition can be illustrated by two individuals
                                  entering a crowded room at a party. Both walk to the far side of the room, one of them slips
                                  through the crowd easily and unnoticed as they reach the far side.
                                </p>
                                <p>
                                  Gummies sweet tart marzipan lemon drops donut pie. Chocolate cake gingerbread jujubes gingerbread
                                  chocolate cake tart bear claw apple pie jelly-o.
                                  Gummies biscuit brownie marshmallow oat cake tootsie roll bear claw topping. Oat cake sesame snaps
                                  icing cupcake wafer tiramisu jelly-o sugar plum carrot cake
                                </p>
                                <p class="mb-0">Sincerely yours,</p>
                                <p class="text-bold-500">Envato Design Team</p>
                              </div>
                              <div class="card-footer pt-0 border-top">
                                <label class="sidebar-label">Attached Files</label>
                                <ul class="list-unstyled mb-0">
                                  <li class="cursor-pointer pb-25">
                                    <img src="../../../app-assets/images/icons/psd.png" height="30" alt="psd.png">
                                    <small class="text-muted ml-1 attchement-text">uikit-design.psd</small>
                                  </li>
                                  <li class="cursor-pointer">
                                    <img src="../../../app-assets/images/icons/sketch.png" height="30" alt="sketch.png">
                                    <small class="text-muted ml-1 attchement-text">uikit-design.sketch</small>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="card collapse-header open" role="tablist">
                          <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                            data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                            aria-controls="collapse7">
                            <div class="collapse-title media">
                              <div class="pr-1">
                                <div class="avatar mr-75">
                                  <img src="../../../app-assets/images/portrait/small/avatar-s-18.png" alt="avtar img holder"
                                    width="30" height="30">
                                </div>
                              </div>
                              <div class="media-body mt-25">
                                <span class="text-primary">Elnora Reese</span>
                                <span class="d-sm-inline d-none">&lt;elnora@gmail.com&gt;</span>
                                <small class="text-muted d-block">to Lois Jimenez</small>
                              </div>
                            </div>
                            <div class="information d-sm-flex d-none align-items-center">
                              <small class="text-muted mr-50">05 Jul 2019, 10:30</small>
                              <span class="favorite warning">
                                <i class="ft-star mr-25"></i>
                              </span>
                              <div class="dropdown">
                                <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                  aria-expanded="false">
                                  <i class='ft-more-vertical mr-0'></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                  <a href="#" class="dropdown-item mail-reply">
                                    <i class='ft-share-2'></i>
                                    Reply
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class='ft-corner-up-right'></i>
                                    Forward
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class='ft-info'></i>
                                    Report Spam
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                            <div class="card-content">
                              <div class="card-body py-1">
                                <p class="text-bold-500">Greetings!</p>
                                <p>
                                  It is a long established fact that a reader will be distracted by the readable content of a page
                                  when looking at its layout.The point of using Lorem Ipsum is that it has a more-or-less normal
                                  distribution of letters, as opposed to using 'Content here, content here',making it look like
                                  readable English.
                                </p>
                                <p>
                                  There are many variations of passages of Lorem Ipsum available, but the majority have suffered
                                  alteration in some form, by injected humour, or randomised words which don't look even slightly
                                  believable.
                                </p>
                                <p class="mb-0">Sincerely yours,</p>
                                <p class="text-bold-500">Envato Design Team</p>
                              </div>
                              <div class="card-footer pt-0 border-top">
                                <label class="sidebar-label">Attached Files</label>
                                <ul class="list-unstyled mb-0">
                                  <li class="cursor-pointer pb-25">
                                    <img src="../../../app-assets/images/icons/psd.png" height="30" alt="psd.png">
                                    <small class="text-muted ml-1 attchement-text">uikit-design.psd</small>
                                  </li>
                                  <li class="cursor-pointer">
                                    <img src="../../../app-assets/images/icons/sketch.png" height="30" alt="sketch.png">
                                    <small class="text-muted ml-1 attchement-text">uikit-design.sketch</small>
                                  </li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- email details  end-->
                  <div class="row px-2 mb-4">
                    <!-- quill editor for reply message -->
                    <div class="col-12 px-0">
                      <div class="card shadow-none border rounded">
                        <div class="card-body quill-wrapper">
                          <span>Reply to Lois Jimenez</span>
                          <div class="snow-container" id="detail-view-quill">
                            <div class="detail-view-editor"></div>
                            <div class="d-flex justify-content-end">
                              <div class="detail-quill-toolbar">
                                <span class="ql-formats mr-50">
                                  <button class="ql-bold"></button>
                                  <button class="ql-italic"></button>
                                  <button class="ql-underline"></button>
                                </span>
                              </div>
                              <button class="btn btn-primary send-btn">
                                <i class='ft-play mr-25'></i>
                                <span class="d-none d-sm-inline"> Send</span>
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!--/ Detailed Email View -->
            </div>

          </div>
        </div>
        <div id="Inbox"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list3 list-group" style="height: 100%;">
                      {% if inboxmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in inboxmessages %}
                                <li data-message3="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results" style="display:block;">
                          <i class="lni lni-close"></i>
                          <h5>No Inbox Messages Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in inboxmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail3="message-{{ message.id }}" class="email-app-details email-app-details3">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}
                          </span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>
                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Starred"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Trash"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Product"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Work"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Misc"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>
        <div id="Undefined"  style="height: 100%;" class="tabcontentt content-wrapper ">
          <div class="content-header row"> </div>
          <div style="height: 100%;" class="content-body">
              <!-- email app overlay -->
            <div style="height: 100%;" class="app-content-overlay"></div>


            <div style="height: 100%;" class="email-app-area" >
              <!-- Email list Area -->
              <div  style="height: 100%;" class="email-app-list-wrapper ">
                <div style="height: 100%;" class="email-app-list">
                  <div class="email-action">
                    <!-- action all delete check -->
                        <div class="action-left d-flex align-items-center">
                      <!-- select All checkbox -->
                      <div class="custom-control custom-checkbox selectAll mr-50">
                        <input type="checkbox" class="custom-control-input" id="checkboxsmall">
                        <label class="custom-control-label" for="checkboxsmall"></label>
                      </div>
                      <!-- delete unread dropdown -->
                      <ul class="list-inline m-0 d-flex">
                        <li class="list-inline-item mail-delete">
                          <button type="button" class="btn btn-icon action-icon">
                            <i class="lni lni-trash"></i>
                          </button>
                        </li>
                      </ul>
                    </div>
                    <!-- action left end here -->

                    <!-- action search -->
                        <div class="action-right d-flex flex-grow-1 align-items-center justify-content-around">
                      <!-- search bar  -->
                      <div class="email-fixed-search flex-grow-1">
                        <div class="sidebar-toggle d-block d-lg-none">
                          <i class="lni lni-menu"></i>
                        </div>
                        <fieldset class="form-group position-relative has-icon-left m-0">
                          <input type="text" class="form-control" id="email-search" placeholder="Search email">
                          <div class="form-control-position">
                            <i style="font-size: 17px;" class="lni lni-search"></i>
                          </div>
                        </fieldset>
                      </div>
                      <!-- pagination and page count -->
                      <span class="d-none d-sm-block">1-10 of 653</span>
                      <button class="btn btn-icon email-pagination-prev d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                      <button class="btn btn-icon email-pagination-next d-none d-sm-block">
                          <i class="lni lni-chevron-right-circle"></i>
                      </button>
                    </div>
                  </div>
                  <!-- / action right -->

                  <!-- email user list start -->
                  <div class="email-user-list email-user-list2 list-group" style="height: 100%;">
                      {% if allmessages %}
                        <ul class="users-list-wrapper media-list">
                            {% for message in allmessages %}
                                <li data-message="message-{{ message.id }}" class="l1 media mail-read">
                                    <div class="user-action">
                                      <div class="checkbox-con mr-25">
                                        <div class="custom-control custom-checkbox">
                                          <input value="{{ message.id }}" type="checkbox" class="custom-control-input" id="checkboxsmall1">
                                          <label class="custom-control-label" for="checkboxsmall1"></label>
                                        </div>
                                      </div>
                                      <span class="favorite {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                        <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                      </span>
                                    </div>
                                    <div class="pr-50">
                                      <div class="avatar">
                                        <img style="object-fit: contain;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder">
                                      </div>
                                    </div>
                                    <div class="media-body">
                                      <div class="user-details">
                                        <div class="mail-items">
                                          <span class="list-group-item-text text-truncate">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                        </div>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                            <span class="mail-date">{{ message.created_at|naturaltime }}</span>
                                          </span>
                                        </div>
                                      </div>
                                      <div class="mail-message">
                                        <span class="list-group-item-text truncate mb-0">
                                            {{ message.msg_content|safe|escape }}
                                        </span>
                                        <div class="mail-meta-item">
                                          <span class="float-right">
                                              {% if message.labels|lower == 'product' %}
                                                  <span class="bullet bullet-success bullet-sm"></span>
                                              {% elif message.labels|lower == 'work' %}
                                                  <span class="bullet bullet-primary bullet-sm"></span>
                                              {% elif message.labels|lower == 'misc' %}
                                                  <span class="bullet bullet-warning bullet-sm"></span>
                                              {% elif message.labels|lower == 'undefined' %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% else %}
                                                  <span class="bullet bullet-secondary bullet-sm"></span>
                                              {% endif %}
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                      {% else %}
                        <!-- email user list end -->
                        <!-- no result when nothing to show on list -->
                        <div class="no-results">
                          <i class="lni lni-close"></i>
                          <h5>No Items Found</h5>
                        </div>
                      {% endif %}
                  </div>
                </div>
              </div>

              <!--/ Email list Area -->
               {% for message in allmessages %}
                  <!-- Detailed Email View -->
                  <div data-detail1="message-{{ message.id }}" class="email-app-details email-app-details2">
                    <!-- email detail view header -->
                    <div class="email-detail-header">
                      <div class="email-header-left d-flex align-items-center mb-1">
                        <span class="go-back mr-50">
                          <i class="lni lni-chevron-left-circle"></i>
                        </span>
                        <h5 class="email-detail-title font-weight-normal mb-0">
                          {{ message.subject|upper }}
                          <span style="{% if message.labels|lower == 'product' %}
                                background-color: green !important;
                                {% elif message.labels|lower == 'work' %}
                                 background-color: lightskyblue !important;
                                {% elif message.labels|lower == 'misc' %}
                                background-color: orange !important;
                                {% elif message.labels|lower == 'undefined' %}
                                 background-color: grey !important;
                                {% else %}
                                background-color: grey !important;
                                {% endif %}" class="badge  badge-pill ml-1">{{ message.labels|title }}</span>
                        </h5>
                      </div>
                      <div class="email-header-right mb-1 ml-2 pl-1">
                        <ul class="list-inline m-0">
                          <li class="list-inline-item">
                            <button class="btn btn-icon action-icon">
                              <i class="lni lni-trash"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <span class="no-of-list d-none d-sm-block ml-1">1-10 of 653</span>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-prev action-icon">
                              <i class="lni lni-chevron-left-circle"></i>
                            </button>
                          </li>
                          <li class="list-inline-item">
                            <button class="btn btn-icon email-pagination-next action-icon">
                              <i class="lni lni-chevron-right-circle"></i>
                            </button>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <!-- email detail view header end-->
                    <div class="email-scroll-area">
                      <!-- email details  -->
                      <div class="row">
                        <div class="col-12">
                          <div class="collapsible email-detail-head">
                            <div class="card collapse-header open" role="tablist">
                              <div id="headingCollapse7" class="card-header d-flex justify-content-between align-items-center"
                                data-toggle="collapse" role="tab" data-target="#collapse7" aria-expanded="true"
                                aria-controls="collapse7">
                                <div class="collapse-title media">
                                  <div class="pr-1">
                                    <div class="avatar mr-75">
                                      <img style="object-fit: contain; width: 38px; height: 38px;" src="{{ request|get_messege_reciever_image:message.reciever.id }}" alt="avtar img holder"
                                        width="30" height="30">
                                    </div>
                                  </div>
                                  <div class="media-body mt-25">
                                    <span class="text-primary">{{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</span>
                                    <span class="d-sm-inline d-none">&lt;{{ message.reciever.email }}&gt;</span>
                                    <small class="text-muted d-block">from {{ request.user.email }}</small>
                                  </div>
                                </div>
                                <div class="information d-sm-flex d-none align-items-center">
                                  <small class="text-muted mr-50">{{ message.created_at|naturaltime }}</small>
                                  <span class="favorite  {% if message.delstar.lower == 'starred' %}warning{% endif %}">
                                    <i data-star data-star-message="{{ message.id }}" class="lni lni-star"></i>
                                  </span>
                                  <div class="dropdown">
                                      {% if not message.sender.id == request.user.id %}
                                        <a href="#" class="dropdown-toggle" id="third-open-menu" data-toggle="dropdown" aria-haspopup="true"
                                          aria-expanded="false">
                                          <i class="lni lni-menu"></i>
                                        </a>
                                      {% endif %}
                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="second-open-submenu">
                                      <a href="#" class="dropdown-item mail-reply">
                                        <i class="lni lni-reply"></i>
                                        Reply
                                      </a>
                                      <a href="#" class="dropdown-item">
                                        <i class="lni lni-reply"></i>
                                        Forward
                                      </a>

                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div id="collapse7" role="tabpanel" aria-labelledby="headingCollapse7" class="collapse show">
                                <div class="card-content">
                                  <div class="card-body py-1">
                                    <p class="text-bold-500">{{ message.subject|upper }}</p>
                                    <span>
                                        {{ message.msg_content|safe|escape }}
                                    </span>

                                  </div>
                                  <div class="card-footer pt-0 border-top">
                                      {% if message.file %}
                                        <label class="sidebar-label">Download Attached Files</label>
                                        <ul class="list-unstyled mb-0">
                                          <li class="cursor-pointer pb-25">
                                              <a href="{{ message.file.url }}" download style="font-size: 18px;">
                                                  <i class="lni lni-files"></i>
                                                  <small class="text-muted ml-1 attchement-text">{{ message.file.name|get_filename }} ({{ message.file.size|sizify }})</small>
                                              </a>

                                          </li>
                                        </ul>
                                      {% endif %}
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- email details  end-->
                      <div class="row px-2 mb-4">
                        <!-- quill editor for reply message -->
                        <div class="col-12 px-0">
                          <div class="card shadow-none border rounded">
                            <div class="card-body " style="padding: 4px;">
{#                              <span></span>#}
                              <div class="snow-container" style="padding-left: 0px; padding-right: 0px;">
                                   {% if not message.sender.id == request.user.id %}
                                      <form action="">
                                            <div class=" col-sm-12" style="padding:0;">
                                                <div class="form-label-group mb-1">
                                                   <label for="emailSubject">Subject</label>
                                                  <input type="text" id="emailSubject" class="form-control" name="subject" style="text-transform: uppercase;" placeholder="Subject">
                                               </div>
                                               <div class="form-group">
                                                    <label for="inboxproduct{{ message.id }}">Label</label>
                                                    <select name="label" class="form-control js-example-basic-single" id="inboxproduct{{ message.id }}">
                                                      <option value="Product">Product</option>
                                                      <option value="Misc">Miscellaneous</option>
                                                      <option value="Work">Work</option>
                                                    </select>
                                               </div>
                                               <div class="form-group mt-2">
                                                   <label for="emailAttach">File</label>
                                                   <div class="custom-file">
                                                     <input name="filee" type="file" class="custom-file-inputt" id="customFile{{ message.id }}">
{#                                                     <label class="custom-file-label" for="customFile{{ message.id }}">Choose file</label>#}
                                                   </div>
                                               </div>
                                               <div class="form-label-group mb-1" style=" position:relative; width: 100%">
                                                    <label for="editorinbox{{ message.id }}">Reply to {{ message.reciever.first_name|title }} {{ message.reciever.last_name|title }}</label>
                                                    <textarea style="height: 100px;" id="editorinbox{{ message.id }}" name="message" class="form-control" rows="20" placeholder="Message"></textarea>
                                               </div>
                                               <script>
                                                      ClassicEditor
                                                        .create( document.querySelector( '#editorinbox{{ message.id }}' ) ,{
                                                            removePlugins: [ 'Insert image', 'Insert table', 'Insert media' ],
                                                            toolbar: ['heading','Paragraph', 'Highlight', 'bold', 'italic', ,'Indent','IndentBlock','undo', 'redo','link','bulletedList', 'numberedList'],

                                                        })
                                                        .catch( error => {
                                                            console.error( error );
                                                        } );
                                                </script>

                                              <button class="btn btn-primary send-btn">
                                                <i class='ft-play mr-25'></i>
                                                <span class="d-none d-sm-inline"> Send</span>
                                              </button>
                                            </div>
                                      </form>
                                  {% endif %}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--/ Detailed Email View -->
                {% endfor %}
            </div>

          </div>
        </div>

      </div>
    </div>
    <!-- END: Content-->




    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>


    <!-- END: Footer-->



    <!-- BEGIN: Vendor JS-->
    <script src="{% static 'email/vendors/js/vendors.min.js' %}"></script>
{#    <script src="{% static 'email/vendors/js/quail.js' %}"></script>#}
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Page Vendor JS-->
    <script src="{% static 'email/vendors/js/ui/jquery.sticky.js' %}"></script>
    <!-- END: Page Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="{% static 'email/js/core/app-menu.min.js' %}"></script>
    <script src="{% static 'email/js/core/app.min.js' %}"></script>
    <script src="{% static 'email/js/scripts/customizer.min.js' %}"></script>
    <script src="{% static 'email/js/scripts/footer.min.js' %}"></script>
    <!-- END: Theme JS-->

    <!-- BEGIN: Page JS-->
    <script src="{% static 'email/js/scripts/pages/app-email.min.js' %}"></script>
    <script>
        document.getElementById("defaultOpen").click();

        function openCity(evt, cityName) {
          // Declare all variables
          var i, tabcontent, tablinks;

          // Get all elements with class="tabcontent" and hide them
          tabcontent = document.getElementsByClassName("tabcontentt");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }

          // Get all elements with class="tablinks" and remove the class "active"
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }

          // Show the current tab, and add an "active" class to the button that opened the tab
          document.getElementById(cityName).style.display = "block";
          evt.currentTarget.className += " active";
        }
        $(document).ready(function() {
            $('.js-example-basic-multiple').select2({
                matcher: matchCustom,
            });
        });
        $('.js-example-basic-single').select2({
              placeholder: 'Select an Label',
         });

        {#$('#compose-form').on("submit", "form", function(event){#}
        {#    event.preventDefault();#}
        {#    let $fff = $(this);#}
        {#    var formm = $('#compose-form').find('form')#}
        {#    var form  = new FormData(formm)#}
        {#    let url = $(this).attr('action');#}
        {#    console.log(form, $fff);#}
        {#    $.ajax({#}
        {#        url : url,#}
        {#        type : "POST",#}
        {#        cache: false,#}
        {#        data : form,#}
        {#        processData: false,#}
        {#        success : function(json) {#}
        {#            $($fff).trigger("reset");#}
        {#            console.log(json)#}
        {##}
        {#        },#}
        {#    });#}
        {# });#}
    </script>
    <!-- END: Page JS-->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>
    {% load sweetify %}
    {% sweetify %}

  </body>
  <!-- END: Body-->

<!-- Mirrored from pixinvent.com/modern-admin-clean-bootstrap-4-dashboard-html-template/html/ltr/horizontal-menu-template/app-email.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 18 Oct 2019 21:05:43 GMT -->
</html>