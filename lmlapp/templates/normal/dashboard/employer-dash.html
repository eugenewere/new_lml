{% extends 'normal/layout/homelayout.html' %}
{% load static %}
{% load call_methods %}
{% block links %}
{#    <script type = "text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>#}
{#    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">#}
{#    <script src="//code.jquery.com/jquery-1.12.4.js"></script>#}
{#    <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>#}
    <script src="https://cdn.ckeditor.com/ckeditor5/16.0.0/classic/ckeditor.js"></script>
    <style>
        .customer{
            display: none;
        }
        .search_wrapper{
            position: absolute; top:100%; z-index: 1; width: 100%; max-height: 250px;
            height: auto; background: white; border-radius: 4px; overflow-y: scroll; overflow-x: hidden;
            display: none;
        }
        .search_wrapper ul{
            list-style: none;
            padding: 5px 16px;

        }.search_wrapper ul li{
            list-style: none;
            padding: 5px 3px;
            border-bottom: 1px solid #a09f9f;

        }.search_wrapper ul li:hover{
            background: #a2a0a0;
            transition: 1s;

        }.search_wrapper ul li a{
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: black;

        }

    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <link rel="stylesheet" href="{% static 'assets/css/chatpannel.css' %}">
{% endblock links %}
{#{% block search %}#}
{#        {% if request.user.is_authenticated %}#}
{#            {% if request.user|logged_in_company %}#}
{#                <li class="active" style="margin-right: 21px; position:relative;" >#}
{#                   #}
{#                </li>#}
{#            {% endif %}#}
{#        {% endif %}#}
{#    {% endblock %}#}
{% block content %}
    <!-- Title Header Start -->
    <section class="inner-header-page " style="background-image:url({% static 'assets/img/banner-10.jpg' %}); color: white; ">
        <div class="container">
            <div class="col-md-8">
                <div class="left-side-container">
                    <div class="freelance-image">
                        <a href="javascript:void (0)"><img src="{{company.logo.url}}" class="img-responsive " style="margin: 18px 0;" alt=""></a>
                    </div>
                    <div class="header-details">
                        <h4 style="color: white;">{{company.company_name|title}}</h4>
                        <p>{{ company.company_motto }}</p>
                        <ul>
                            {% if company.rank_status == "UNDEFINED" %}
                                <li  ><div class="verified-action-error"><i style="line-height: 25px; margin-right: 3px;" class="fas fa-ban"></i> {{ company.rank_status|title}}</div></li>
                            {% endif %}
                            {% if company.rank_status == "BASIC" %}
                                <li><div class="verified-action-success"><i style="line-height: 25px; margin-right: 3px;" class="fas fa-check"></i> {{company.rank_status|title}}</div></li>
                            {% endif %}
                            {% if company.rank_status == "PRO_BASIC" %}
                                <li ><div class="verified-action-success"><i style="line-height: 25px; margin-right: 3px;" class="fas fa-check-double"></i> {{ company.rank_status|title}}</div></li>
                            {% endif %}
                            {% if company.rank_status == "PREMIUM" %}
                                <li><div class="verified-action-info"><i style="line-height: 25px; margin-right: 3px;" class="fas fa-check-square"></i> {{company.rank_status|title}}</div></li>
                            {% endif %}
                            {% if company.rank_status == "ULTIMATE" %}
                                <li ><div class="verified-action-primary"><i style="line-height: 25px; margin-right: 3px;" class="far fa-check-circle"></i> {{ company.rank_status|title}}</div></li>
                            {% endif %}

                            {% if company.rank_status == "PRO_ULTIMATE" %}
                                <li ><div class="verified-action-bronze"><i style="line-height: 25px; margin-right: 3px;" class="fas fa-check-circle"></i> {{ company.rank_status|title}}</div></li>
                            {% endif %}
                            {% if company.rank_status == "PLATINUM" %}
                                <li ><div class="verified-action-gold"><i style="line-height: 25px; margin-right: 3px;" class="far fa-check-square"></i> {{ company.rank_status|title}}</div></li>
                            {% endif %}


                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-4 bl-1 br-gary">
                <div class="right-side-detail">
                    <ul>
                        <li><span class="detail-info">Experience</span>{{ company.id|company_experience_years }} </li>
                    </ul>
                    <ul class="social-info">
                        {% if social.facebook %}
                           <li> <a target="_blank" href="{{social.facebook}}"><i style="margin-top:10px; margin-right: 1px; font-size: 20px;" class="fab fa-linkedin"></i></a></li>
                        {% endif %}
                        {% if social.facebook %}
                           <li><a target="_blank" href="{{ social.facebook }}"><i style="margin-top:10px; margin-right: 1px; font-size: 20px;" class="fab fa-facebook"></i></a></li>
                        {% endif %}
                        {% if social.instagram %}
                           <li><a target="_blank" href="{{ social.instagram }}"><i style="margin-top:10px; margin-right: 1px; font-size: 20px;" class="fab fa-instagram"></i></a></li>
                        {% endif %}
                        {% if social.twitter %}
                           <li><a target="_blank" href="{{ social.twitter }}"><i style="margin-top:10px; margin-right: 1px; font-size: 20px;" class="fab fa-twitter-square"></i></a></li>
                        {% endif %}
                        {% if social.googlr_plus %}
                           <li><a target="_blank" href="{{ social.googlr_plus }}"><i style="margin-top:10px; margin-right: 1px; font-size: 20px;" class="fab fa-google-plus-square"></i></a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>

        </div>
    </section>
    <div class="clearfix"></div>
    <!-- Title Header End -->
    <!-- ========== Begin: Brows job Category ===============  -->
    <section class="brows-job-category gray-bg">
        <div class="container-fluid" style="padding: 60px 20px;">
            <div class="col-sm-12" >
                <div class="row container" style="padding: 10px 5px; margin: 0 auto; display: flex !important; justify-content: flex-end; align-items: center; ">
                    <a style=" margin-left: 3px; " href="{% url 'LML:employerdetails' %}" class="custom-button btn btn-success "><i class="fa fa-user mrg-r-5"></i>Details</a>
                    <a style=" margin-left: 3px" href="{% url 'LML:employer_dash_message' request.user.username %}" class="custom-button btn btn-info "><i class="fa fa-comment mrg-r-5"></i>Messages</a>
                </div>
                <div class="row" style="display: flex; justify-content: center;">
                   <div  class="deatil-tab-employ tool-tab col-sm-12 col-md-12 col-lg-10 " style="background: white;" >
                        <ul class="nav simple nav-tabs" id="simple-design-tab1" style="display: flex; justify-content: center; flex-wrap: wrap;">
                            <li class="active"><a data-toggle="pill" href="#all">All Candidates ({{customers.count}})</a></li>
                            <li class=""><a data-toggle="pill" href="#basic2">Basic Candidates ({{ basic_customers|length }})</a></li>
                            <li class=""><a data-toggle="pill" href="#premium">Premium Candidates ({{ premium_customers|length }})</a></li>
                            <li class=""><a data-toggle="pill" href="#ultimate">Ultimate Candidates ({{ ultimate_customers|length }})</a></li>
                            <li  class=""><a data-toggle="pill" href="#analystics">Analytics</a></li>
                            <li class=""><a data-toggle="pill" href="#about">Payment History</a></li>
                        </ul>


                          <!-- Start All Sec -->
                        <div id="tabcont"  class="tab-content" style="height: 800px;overflow-x: hidden; overflow-y: scroll;">
                            <div id="all" class="tab-pane fade-in active" style="height: 100%;">
                                <div class="row " style="display:flex; justify-content: flex-start; align-items: center; padding-left: 10px; {% if customers|length > 0 %} visibility: visible; {% else %} visibility: hidden  {% endif %}">
                                    <div style="position: relative;">
                                        <input data-search aria-label="lll" id="searchdashall" style="background-color: white;z-index: 5; padding: 15px; width: 250px; border-radius: 6px; position:relative;" type="text" class="form-control whitee" placeholder="Search">
                                    </div>
                                    <div class="col-sm-1" style="padding-right: 0;">
                                      <select id="sortselectall" class="form-control form-control-sm" style="">
                                          <option selected>Sort</option>
                                          <option value="az">A to Z</option>
                                          <option value="za">Z to A</option>
                                      </select>
                                    </div>
                                </div>

                              {% if customers %}
                                    <article class="advance-search-job">
                                        <div id="listall" class="row no-mrg " style="display: flex; justify-content: center; flex-wrap: wrap;">
                                             {% for customer in customers %}
                                                <!-- Modal -->
                                                <div class="modal fade" id="allcandidate{{ customer.customer.id }}" tabindex="-1" role="dialog" aria-labelledby="allcandidate{{ customer.customer.id }}" aria-hidden="true">
                                                  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                    <div class="modal-content" style="padding-bottom: 0;">
                                                      <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalCenterTitle">Review {{ customer.first_name|title }} {{ customer.last_name|title }}</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                        </button>
                                                      </div>
                                                      <div class="modal-body " style="padding: 15px">
    {#                                                      <div class="container-fluid">#}
                                                              <form action="{% url 'LML:review_shortlisted_customer' %}" method="post" enctype="multipart/form-data">
                                                              {% csrf_token %}
                                                              <input name="customer" type="text" hidden value="{{ customer.id }}">
                                                              <input name="company" type="text" hidden value="{{ request.user.id }}">
                                                              <div class="card-ratings-wrapper" style="display: flex; flex-direction: column; margin-bottom: 20px;">
                                                                <label for="exampleInputsd">Ratings</label>
                                                                <div class="rate" style="margin-right: auto;">
                                                                    <input type="radio" id="star5{{ customer.id }}" name="ratings" value="5" />
                                                                        <label for="star5{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="5 Stars">5 stars</label>
                                                                    <input type="radio" id="star4{{ customer.id }}" name="ratings" value="4" />
                                                                        <label for="star4{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="4 Stars">4 stars</label>
                                                                    <input type="radio" id="star3{{ customer.id }}" name="ratings" value="3" />
                                                                        <label for="star3{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="3 Stars">3 stars</label>
                                                                    <input type="radio" id="star2{{ customer.id }}" name="ratings" value="2" />
                                                                        <label for="star2{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="2 Stars">2 stars</label>
                                                                    <input type="radio" id="star1{{ customer.id }}" name="ratings" value="1" />
                                                                        <label for="star1{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="1 Stars">1 star</label>
                                                                </div>
                                                                <small id="emailHelp" class="form-text text-muted">Rate Out of 5</small>
                                                              </div>
                                                              <div class="form-group" >
                                                                <label for="allcandidatetextarea{{ customer.id }}">Review Message</label>
                                                                <textarea required rows="20" style="max-width: 100%" class="form-control" name="message" id="allcandidatetextarea{{ customer.id }}" ></textarea>
                                                                <small id="emailHelp" class="form-text text-muted">Thought about this candidate</small>
                                                              </div>
                                                              <div class="col-sm-12 row">
                                                                  <button type="submit" class="update-btn custom-button btn-sm" style="border-radius: 140px; margin: 0 auto; padding: 10px">Review</button>
                                                              </div>
                                                              <script>
                                                                   CKEDITOR.replace( 'allcandidatetextarea{{ customer.id }}' );
                                                              </script>
                                                          </form>
    {#                                                      </div>#}
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                                <div  data-parentorall="custm-{{ customer.customer.id }}" data-filter-item style="display: none;" data-sort="{{ customer.customer.first_name }}" data-filter-name="{{ customer.customer.first_name|lower }} {{ customer.customer.last_name|lower }}" class="c_all  paid-candidate-container">
                                                    <div class="paid-candidate-box card-custom-border">
                                                        {% if request.user.is_authenticated %}
                                                            {% if request.user|logged_in_company %}
                                                                <span class="tpc-status {% if customer.customer.rank_status == "BASIC" %} bg-primary {% elif customer.customer.rank_status == "PREMIUM" %} bg-success {% elif customer.customer.rank_status == "ULTIMATE" %} bg-warning {% else %} bg-secondary {% endif %}">{{ customer.customer.rank_status }}</span>
                                                            {% endif %}
                                                        {% endif %}
                                                        <div class="dropdown">
                                                            <div class="btn-group fl-right">
                                                                {% if request.user|logged_in_company %}
                                                                    <button type="button" class="btn-trans" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-gear"></i></button>
                                                                    <div class="dropdown-menu pull-right animated flipInX">
                                                                        {% csrf_token %}

                                                                        <a data-idparent="custm-{{ customer.customer.id }}" id="custm-{{ customer.customer.id }}" onclick="unshortlist(this);" data-customer="{{ customer.customer.id }}" data-company="{{ request.user.id }}" href="javascript:void(0)">UnShortlisted</a>
                                                                        <a  data-customer="{{ customer.customer.username }}" id="kk{{ customer.customer.id }}" href="#">Chat</a>
                                                                        <a href="javascript:void(0)" data-toggle="modal" data-target="#allcandidate{{ customer.customer.id }}">Review</a>


                                                                        <script>

                                                                            document.querySelector('#kk{{ customer.customer.id }}').onclick = function(e) {
                                                                                var roomName = document.getElementById('kk{{ customer.customer.id }}').getAttribute('data-customer');
                                                                                window.location.pathname = 'employerdash_message/' + roomName + '/';
                                                                            };
                                                                            function unshortlist(me) {
                                                                                var cust_id= me.id;
                                                                                var data_parent= me.dataset.idparent;
                                                                                var company = me.dataset.company;
                                                                                var customer = me.dataset.customer;
                                                                                console.log(company, customer);
                                                                                $.ajax({
                                                                                    type: "POST",
                                                                                    url : "{% url 'LML:unshortlistemployees' %}",
                                                                                    data:{
                                                                                        'customer_id' : customer,
                                                                                        'company_id' : company,
                                                                                        'csrfmiddlewaretoken': $("input[name=csrfmiddlewaretoken]").val(),
                                                                                    },
                                                                                    dataType:'json',
                                                                                    success : function searchSuccess(data){
                                                                                        console.log(data);
                                                                                        if(data.is_shortlisted){
                                                                                            errorshortlisting(data);
                                                                                        }
                                                                                        else if(data.shortlisted){
                                                                                            console.log("[data-parentorall="+cust_id +"]")
                                                                                            $( "[data-parentorall="+ data_parent +"]" ).fadeOut();

                                                                                           setTimeout(function () {
                                                                                               shortlisted(data);
                                                                                           }, 1200);
                                                                                        }
                                                                                    },

                                                                                });
                                                                                function shortlisted(k){

                                                                                    swal.fire({
                                                                                    title: "Success!",
                                                                                    text: k.success_message,
                                                                                    type: "success",
                                                                                    confirmButtonText: "Continue"
                                                                                   });
                                                                                }
                                                                                function errorshortlisting(k){
                                                                                    swal.fire({
                                                                                    title: "Error!",
                                                                                    text: k.error_message,
                                                                                    type: "error",
                                                                                    confirmButtonText: "Continue"
                                                                                   });
                                                                                }
                                                                            }
                                                                        </script>
                                                                    </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>

                                                        <div class="paid-candidate-inner--box">
                                                            <div class="paid-candidate-box-thumb" style="height: 131px !important;"><img style="height: 100%; width: 100%; max-width: 100%;" src="{{customer.customer.profile_image.url}}" class="img-responsive img-circle" alt="" /></div>
                                                            <div class="paid-candidate-box-detail">
                                                                <h4 class="text-capitalize">{{customer.customer.first_name}} {{customer.customer.last_name}}</h4>
                                                                <span class="desination text-capitalize">{{customer.customer.category.category}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="paid-candidate-box-extra">
                                                            <ul style="height: 100px; display: flex; flex-wrap: wrap; justify-content: center; align-items: center;">
                                                                {% for skill in customer.customer.skillset %}
                                                                <li style="height: 30px;">{{skill.skill}}</li>
                                                                {% endfor %}
                                                                {% if customer.skillcount %}
                                                                    <li style="height: 30px;" class="more-skill bg-primary">+{{customer.customer.skillcount}}</li>
                                                                {% endif %}
                                                            </ul>
                                                            <p>{{customer.customer.biography|truncatechars:20}}.</p>
                                                        </div>
                                                    </div>
                                                    {% if request.user|logged_in_company %}
                                                        <a href="{% url 'LML:premium_employee_detail' customer.customer.id %}" class="btn btn-paid-candidate bt-1">View Detail</a>
                                                    {% endif %}
                                                </div>
                                             {% endfor %}
                                        </div>
                                    </article>
                                <script>

                                    $('[data-search]').on('keyup', function() {
                                        var searchVal = $(this).val();
                                        var filterItems = $('[data-filter-item]');

                                        if ( searchVal != '' ) {
                                            filterItems.addClass('hidden');
                                            $('[data-filter-item][data-filter-name*="' + searchVal.toLowerCase() + '"]').removeClass('hidden');
                                        } else {
                                            filterItems.removeClass('hidden');
                                        }
                                    });
                                    $('#sortselectall').change(function () {
                                        var ascending = false;
                                        if($(this).val().toLowerCase() === 'az'){
                                            var sorted = $('.c_all').sort(function(a,b){
                                                return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? 1 : -1;
                                            });
                                            ascending = ascending ? false : true;
                                            $('#listall').html(sorted);
                                        }else if ($(this).val().toLowerCase() === 'za'){
                                            var sortedd = $('.c_all').sort(function(a,b){
                                                return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? -1 : 1;
                                            });
                                            ascending = ascending ? true : false;
                                            $('#listall').html(sortedd);
                                        }
                                    });
                                    $(function () {
                                        $(".c_all").slice(0, 4).show();
                                        $("#loadall").on('click', function (e) {
                                            e.preventDefault();
                                            $(".c_all:hidden").slice(0, 4).slideDown(function () {

                                            });
                                            if ($(".c_all:hidden").length === 0) {
                                                $("#loadall").fadeOut('slow');
                                            }
                                            $("#tabcont").animate({ scrollTop: $('#tabcont').prop("scrollHeight")}, 1500);
                                            {##}
                                        });
                                    });
                                 </script>
                                    {% if customers >= 4 %}
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12">
                                                <div class="text-center">
                                                    <a id="loadall" href="#" class="btn btn-primary">Load More</a>
                                                    <a href="#listall" class="btn btn-primary">Back to top</a>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                              {% else %}
                                  <div class="col-sm-12" style="padding: 20px 10px; height: 100%;display: flex; justify-content: center; align-items: center;">
                                        <h3 style="text-align: center;">No Candidate Selected</h3>
                                   </div>
                             {% endif %}
                            </div>
                            <div id="basic2" class="tab-pane fade-in " style="height: 100%;">
                                <div class="row " style="{% if basic_customers|length > 0 %} visibility: visible; {% else %} visibility: hidden; {% endif %} display:flex; justify-content: flex-start; align-items: center; padding-left: 10px;">
                                    <div style="position: relative;">
                                        <input data-search2 aria-label="lll1" id="searchdashbasic" style="background-color: white;z-index: 5; padding: 15px; width: 250px; border-radius: 6px; position:relative;" type="text" class="form-control whitee" placeholder="Search">
                                    </div>
                                    <div class="col-sm-1" style="padding-right: 0;">
                                      <select id="sortselectbasic" class="form-control form-control-sm" style="">
                                          <option selected>Sort</option>
                                          <option value="az">A to Z</option>
                                          <option value="za">Z to A</option>
                                      </select>
                                    </div>
                                </div>
                                 {% if  basic_customers|length > 0 %}
                                    <article class="advance-search-job">
                                        <div id="listbasic" class="row no-mrg"  style="display: flex; justify-content: center; flex-wrap: wrap;">
                                             {% for customer in basic_customers %}
                                                 <!-- Modal -->
                                                <div class="modal fade" id="basic{{ customer.id }}" tabindex="-1" role="dialog" aria-labelledby="basic{{ customer.id }}" aria-hidden="true">
                                                  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                    <div class="modal-content" style="padding-bottom: 0;">
                                                      <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalCenterTitle">Review {{ customer.first_name|title }} {{ customer.last_name|title }}</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                        </button>
                                                      </div>
                                                      <div class="modal-body " style="padding: 15px">
    {#                                                      <div class="container-fluid">#}
                                                              <form action="{% url 'LML:review_shortlisted_customer' %}" method="post" enctype="multipart/form-data">
                                                              {% csrf_token %}
                                                              <input name="customer" type="text" hidden value="{{ customer.id }}">
                                                              <input name="company" type="text" hidden value="{{ request.user.id }}">
                                                              <div class="card-ratings-wrapper" style="display: flex; flex-direction: column; margin-bottom: 20px;">
                                                                <label for="exampleInputsd">Ratings</label>
                                                                <div class="rate" style="margin-right: auto;">
                                                                    <input type="radio" id="star5{{ customer.id }}" name="ratings" value="5" />
                                                                        <label for="star5{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="5 Stars">5 stars</label>
                                                                    <input type="radio" id="star4{{ customer.id }}" name="ratings" value="4" />
                                                                        <label for="star4{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="4 Stars">4 stars</label>
                                                                    <input type="radio" id="star3{{ customer.id }}" name="ratings" value="3" />
                                                                        <label for="star3{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="3 Stars">3 stars</label>
                                                                    <input type="radio" id="star2{{ customer.id }}" name="ratings" value="2" />
                                                                        <label for="star2{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="2 Stars">2 stars</label>
                                                                    <input type="radio" id="star1{{ customer.id }}" name="ratings" value="1" />
                                                                        <label for="star1{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="1 Stars">1 star</label>
                                                                </div>
                                                                <small id="emailHelp" class="form-text text-muted">Rate Out of 5</small>
                                                              </div>
                                                              <div class="form-group" >
                                                                <label for="allbasictextarea{{ customer.id }}">Review Message</label>
                                                                <textarea required rows="20" style="max-width: 100%" class="form-control" name="message" id="allbasictextarea{{ customer.id }}" ></textarea>
                                                                <small id="emailHelp" class="form-text text-muted">Thought about this candidate</small>
                                                              </div>
                                                              <div class="col-sm-12 row">
                                                                  <button type="submit" class="update-btn custom-button btn-sm" style="border-radius: 140px; margin: 0 auto; padding: 10px">Review</button>
                                                              </div>
                                                              <script>
                                                                   CKEDITOR.replace( 'allbasictextarea{{ customer.id }}' );
                                                              </script>
                                                          </form>
    {#                                                      </div>#}
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>

                                                <div data-parentorall="custm-{{ customer.id }}" data-filter-item2 style="display: none;" data-sort="{{ customer.first_name }}" data-filter-name2="{{ customer.first_name|lower }} {{ customer.last_name|lower }}" class="c_basic paid-candidate-container">
                                                        <div class="paid-candidate-box card-custom-border">
                                                            {% if request.user.is_authenticated %}
                                                                {% if request.user|logged_in_company %}
                                                                    <span class="tpc-status {% if customer.rank_status == "BASIC" %} bg-primary {% elif customer.rank_status == "PREMIUM" %} bg-success {% elif customer.rank_status == "ULTIMATE" %} bg-warning {% else %} bg-secondary {% endif %}">{{ customer.rank_status }}</span>
                                                                {% endif %}
                                                            {% endif %}
                                                            <div class="dropdown">
                                                                <div class="btn-group fl-right">
                                                                    {% if request.user|logged_in_company %}
                                                                        <button type="button" class="btn-trans" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-gear"></i></button>
                                                                        <div class="dropdown-menu pull-right animated flipInX">
                                                                            {% csrf_token %}

                                                                            <a data-idparent="custm-{{ customer.id }}"  id="custm-{{ customer.id }}" onclick="unshortlist(this);" data-customer="{{ customer.id }}" data-company="{{ request.user.id }}" href="javascript:void(0)">UnShortlisted</a>
                                                                            <a  data-customer="{{ customer.username }}" id="kk{{ customer.id }}" href="#">Chat</a>
                                                                            <a href="javascript:void(0)" data-toggle="modal" data-target="#basic{{ customer.id }}">Review</a>
                                                                            <script>

                                                                                document.querySelector('#kk{{ customer.id }}').onclick = function(e) {
                                                                                    var roomName = document.getElementById('kk{{ customer.id }}').getAttribute('data-customer');
                                                                                    window.location.pathname = 'employerdash_message/' + roomName + '/';
                                                                                };
                                                                                function unshortlist(me) {
                                                                                    var cust_id= me.id;
                                                                                    var data_parent= me.dataset.idparent;
                                                                                    var company = me.dataset.company;
                                                                                    var customer = me.dataset.customer;
                                                                                    console.log(company, customer);
                                                                                    $.ajax({
                                                                                        type: "POST",
                                                                                        url : "{% url 'LML:unshortlistemployees' %}",
                                                                                        data:{
                                                                                            'customer_id' : customer,
                                                                                            'company_id' : company,
                                                                                            'csrfmiddlewaretoken': $("input[name=csrfmiddlewaretoken]").val(),
                                                                                        },
                                                                                        dataType:'json',
                                                                                        success : function searchSuccess(data){
                                                                                            console.log(data);
                                                                                            if(data.is_shortlisted){
                                                                                                errorshortlisting(data);

                                                                                            }
                                                                                            else if(data.shortlisted){
                                                                                                $( "[data-parentorall="+ data_parent +"]" ).fadeOut();

                                                                                               setTimeout(function () {
                                                                                                   shortlisted(data);
                                                                                               }, 1200);
                                                                                            }
                                                                                        },

                                                                                    });
                                                                                    function shortlisted(k){

                                                                                        swal.fire({
                                                                                        title: "Success!",
                                                                                        text: k.success_message,
                                                                                        type: "success",
                                                                                        confirmButtonText: "Continue"
                                                                                       });
                                                                                    }
                                                                                     function errorshortlisting(k){
                                                                                        swal.fire({
                                                                                        title: "Error!",
                                                                                        text: k.error_message,
                                                                                        type: "error",
                                                                                        confirmButtonText: "Continue"
                                                                                       });
                                                                                    }


                                                                                }
                                                                            </script>
                                                                        </div>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            <div class="paid-candidate-inner--box">
                                                                <div class="paid-candidate-box-thumb" style="height: 131px !important;"><img style="height: 100%; width: 100%; max-width: 100%;" src="{{customer.profile_image.url}}" class="img-responsive img-circle" alt="" /></div>
                                                                <div class="paid-candidate-box-detail">
                                                                    <h4 class="text-capitalize">{{customer.first_name}} {{customer.last_name}}</h4>
                                                                    <span class="desination text-capitalize">{{customer.category.category}}</span>
                                                                </div>
                                                            </div>
                                                            <div class="paid-candidate-box-extra">
                                                                <ul style="height: 100px; display: flex; flex-wrap: wrap; justify-content: center; align-items: center;">
                                                                    {% for skill in customer.skillset %}
                                                                    <li style="height: 30px;">{{skill.skill}}</li>
                                                                    {% endfor %}
                                                                    {% if customer.skillcount %}
                                                                        <li style="height: 30px;" class="more-skill bg-primary">+{{customer.skillcount}}</li>
                                                                    {% endif %}
                                                                </ul>
                                                                <p>{{customer.biography|truncatechars:20}}.</p>
                                                            </div>
                                                        </div>
                                                        {% if request.user|logged_in_company %}
                                                            <a href="{% url 'LML:premium_employee_detail' customer.id %}" class="btn btn-paid-candidate bt-1">View Detail</a>
                                                        {% endif %}
                                                    </div>
                                             {% endfor %}
                                        </div>
                                    </article>
                                       <script>
                                        $('[data-search2]').on('keyup', function() {
                                            var searchVal = $(this).val();
                                            var filterItems = $('[data-filter-item2]');

                                            if ( searchVal !== '' ) {
                                                filterItems.addClass('hidden');
                                                $('[data-filter-item2][data-filter-name2*="' + searchVal.toLowerCase() + '"]').removeClass('hidden');
                                            } else {
                                                filterItems.removeClass('hidden');
                                            }
                                        });
                                        $('#sortselectbasic').change(function () {
                                            var ascending = false;
                                            if($(this).val().toLowerCase() === 'az'){
                                                var sorted = $('.c_basic').sort(function(a,b){
                                                    return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? 1 : -1;
                                                });
                                                ascending = ascending ? false : true;
                                                $('#listbasic').html(sorted);
                                            }else if ($(this).val().toLowerCase() === 'za'){
                                                var sortedd = $('.c_basic').sort(function(a,b){
                                                    return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? -1 : 1;
                                                });
                                                ascending = ascending ? true : false;
                                                $('#listbasic').html(sortedd);
                                            }
                                        });
                                        $(function () {
                                            $(".c_basic").slice(0, 4).show();
                                            $("#loadbasic").on('click', function (e) {
                                                e.preventDefault();
                                                $(".c_basic:hidden").slice(0, 4).slideDown(function () {

                                                });
                                                if ($(".c_basic:hidden").length === 0) {
                                                    $("#loadbasic").fadeOut('slow');
                                                }
                                                $("#tabcont").animate({ scrollTop: $('#tabcont').prop("scrollHeight")}, 1500);
                                                {##}
                                            });
                                        });
                                     </script>
                                    {% if basic_customers.count >= 4 %}
                                        <div class="row">
                                        <div class="col-md-12 col-sm-12">
                                            <div class="text-center">
                                                <a id="loadbasic" href="#" class="btn btn-primary">Load More</a>
                                                <a href="#listbasic" class="btn btn-primary">Back to top</a>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                  {% else %}
                                  <div class="col-sm-12" style="padding: 20px 10px; height: 100%;display: flex; justify-content: center; align-items: center;">
                                        <h3 style="text-align: center;">No Basic Candidate Selected</h3>
                                   </div>
                               {% endif %}
                            </div>
                            <div id="premium" class="tab-pane fade-in " style="height: 100%;">
                                  <div class="row " style="display:flex; justify-content: flex-start; align-items: center; padding-left: 10px; {% if premium_customers|length > 0 %} visibility: visible; {% else %} visibility: hidden; {% endif %}">
                                        <div style="position: relative;">
                                            <input data-search3 aria-label="lll1" id="searchdashpremium" style="background-color: white;z-index: 5; padding: 15px; width: 250px; border-radius: 6px; position:relative;" type="text" class="form-control whitee" placeholder="Search">
                                        </div>
                                        <div class="col-sm-1" style="padding-right: 0;">
                                          <select id="sortselectpremium" class="form-control form-control-sm" style="">
                                              <option selected>Sort</option>
                                              <option value="az">A to Z</option>
                                              <option value="za">Z to A</option>
                                          </select>
                                        </div>
                                    </div>
                                  {% if premium_customers|length > 0 %}
                                    <article class="advance-search-job">
                                        <div id="listpremium" class="row no-mrg" style="display: flex; justify-content: center; flex-wrap: wrap;">
                                             {% for customer in premium_customers %}
                                                 <div class="modal fade" id="premium{{ customer.id }}" tabindex="-1" role="dialog" aria-labelledby="premium{{ customer.id }}" aria-hidden="true">
                                                   <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                    <div class="modal-content" style="padding-bottom: 0;">
                                                      <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalCenterTitle">Review {{ customer.first_name|title }} {{ customer.last_name|title }}</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                        </button>
                                                      </div>
                                                      <div class="modal-body " style="padding: 15px">
    {#                                                      <div class="container-fluid">#}
                                                              <form action="{% url 'LML:review_shortlisted_customer' %}" method="post" enctype="multipart/form-data">
                                                              {% csrf_token %}
                                                              <input name="customer" type="text" hidden value="{{ customer.id }}">
                                                              <input name="company" type="text" hidden value="{{ request.user.id }}">
                                                              <div class="card-ratings-wrapper" style="display: flex; flex-direction: column; margin-bottom: 20px;">
                                                                <label for="exampleInputsd">Ratings</label>
                                                                <div class="rate" style="margin-right: auto;">
                                                                    <input type="radio" id="star5{{ customer.id }}" name="ratings" value="5" />
                                                                        <label for="star5{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="5 Stars">5 stars</label>
                                                                    <input type="radio" id="star4{{ customer.id }}" name="ratings" value="4" />
                                                                        <label for="star4{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="4 Stars">4 stars</label>
                                                                    <input type="radio" id="star3{{ customer.id }}" name="ratings" value="3" />
                                                                        <label for="star3{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="3 Stars">3 stars</label>
                                                                    <input type="radio" id="star2{{ customer.id }}" name="ratings" value="2" />
                                                                        <label for="star2{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="2 Stars">2 stars</label>
                                                                    <input type="radio" id="star1{{ customer.id }}" name="ratings" value="1" />
                                                                        <label for="star1{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="1 Stars">1 star</label>
                                                                </div>
                                                                <small id="emailHelp" class="form-text text-muted">Rate Out of 5</small>
                                                              </div>
                                                              <div class="form-group" >
                                                                <label for="allpremiumtextarea{{ customer.id }}">Review Message</label>
                                                                <textarea required rows="20" style="max-width: 100%" class="form-control" name="message" id="allpremiumtextarea{{ customer.id }}" ></textarea>
                                                                <small id="emailHelp" class="form-text text-muted">Thought about this candidate</small>
                                                              </div>
                                                              <div class="col-sm-12 row">
                                                                  <button type="submit" class="update-btn custom-button btn-sm" style="border-radius: 140px; margin: 0 auto; padding: 10px">Review</button>
                                                              </div>
                                                              <script>
                                                                   CKEDITOR.replace( 'allpremiumtextarea{{ customer.id }}' );
                                                              </script>
                                                          </form>
    {#                                                      </div>#}
                                                      </div>
                                                    </div>
                                                  </div>
                                                 </div>
                                                 <div data-parentorall="custm-{{ customer.id }}" data-filter-item3 style="display: none;" data-sort="{{ customer.first_name }}" data-filter-name3="{{ customer.first_name|lower }} {{ customer.last_name|lower }}" class="c_premium paid-candidate-container">
                                                        <div class="paid-candidate-box card-custom-border">
                                                            {% if request.user.is_authenticated %}
                                                                {% if request.user|logged_in_company %}
                                                                    <span class="tpc-status {% if customer.rank_status == "BASIC" %} bg-primary {% elif customer.rank_status == "PREMIUM" %} bg-success {% elif customer.rank_status == "ULTIMATE" %} bg-warning {% else %} bg-secondary {% endif %}">{{ customer.rank_status }}</span>
                                                                {% endif %}
                                                            {% endif %}
                                                            <div class="dropdown">
                                                                <div class="btn-group fl-right">
                                                                    {% if request.user|logged_in_company %}
                                                                        <button type="button" class="btn-trans" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-gear"></i></button>
                                                                        <div class="dropdown-menu pull-right animated flipInX">
                                                                            {% csrf_token %}

                                                                            <a data-idparent="custm-{{ customer.id }}" id="custm{{ customer.id }}" onclick="unshortlist(this);" data-customer="{{ customer.id }}" data-company="{{ request.user.id }}" href="javascript:void(0)">UnShortlisted</a>
                                                                            <a  data-customer="{{ customer.username }}" id="kk{{ customer.id }}" href="#">Chat</a>
                                                                            <a href="javascript:void(0)" data-toggle="modal" data-target="#premium{{ customer.id }}">Review</a>
                                                                             <!-- Modal -->

                                                                            <script>

                                                                                document.querySelector('#kk{{ customer.id }}').onclick = function(e) {
                                                                                    var roomName = document.getElementById('kk{{ customer.id }}').getAttribute('data-customer');
                                                                                    window.location.pathname = 'employerdash_message/' + roomName + '/';
                                                                                };
                                                                                function unshortlist(me) {
                                                                                    var cust_id= me.id;
                                                                                     var data_parent= me.dataset.idparent;
                                                                                    var company = me.dataset.company;
                                                                                    var customer = me.dataset.customer;
                                                                                    console.log(company, customer);
                                                                                    $.ajax({
                                                                                        type: "POST",
                                                                                        url : "{% url 'LML:unshortlistemployees' %}",
                                                                                        data:{
                                                                                            'customer_id' : customer,
                                                                                            'company_id' : company,
                                                                                            'csrfmiddlewaretoken': $("input[name=csrfmiddlewaretoken]").val(),
                                                                                        },
                                                                                        dataType:'json',
                                                                                        success : function searchSuccess(data){
                                                                                            console.log(data);
                                                                                            if(data.is_shortlisted){
                                                                                                errorshortlisting(data);

                                                                                            }
                                                                                            else if(data.shortlisted){
                                                                                                 $( "[data-parentorall="+ data_parent +"]" ).fadeOut();

                                                                                               setTimeout(function () {
                                                                                                   shortlisted(data);
                                                                                               }, 1200);
                                                                                            }
                                                                                        },

                                                                                    });
                                                                                    function shortlisted(k){

                                                                                        swal.fire({
                                                                                        title: "Success!",
                                                                                        text: k.success_message,
                                                                                        type: "success",
                                                                                        confirmButtonText: "Continue"
                                                                                       });
                                                                                    }
                                                                                     function errorshortlisting(k){
                                                                                        swal.fire({
                                                                                        title: "Error!",
                                                                                        text: k.error_message,
                                                                                        type: "error",
                                                                                        confirmButtonText: "Continue"
                                                                                       });
                                                                                    }


                                                                                }
                                                                            </script>
                                                                        </div>
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                            <div class="paid-candidate-inner--box">
                                                                <div class="paid-candidate-box-thumb" style="height: 131px !important;"><img style="height: 100%; width: 100%; max-width: 100%;" src="{{customer.profile_image.url}}" class="img-responsive img-circle" alt="" /></div>
                                                                <div class="paid-candidate-box-detail">
                                                                    <h4 class="text-capitalize">{{customer.first_name}} {{customer.last_name}}</h4>
                                                                    <span class="desination text-capitalize">{{customer.category.category}}</span>
                                                                </div>
                                                            </div>
                                                            <div class="paid-candidate-box-extra">
                                                                <ul style="height: 100px; display: flex; flex-wrap: wrap; justify-content: center; align-items: center;">
                                                                    {% for skill in customer.skillset %}
                                                                    <li style="height: 30px;">{{skill.skill}}</li>
                                                                    {% endfor %}
                                                                    {% if customer.skillcount %}
                                                                        <li style="height: 30px;" class="more-skill bg-primary">+{{customer.skillcount}}</li>
                                                                    {% endif %}
                                                                </ul>
                                                                <p>{{customer.biography|truncatechars:20}}.</p>
                                                            </div>
                                                        </div>
                                                        {% if request.user|logged_in_company %}
                                                            <a href="{% url 'LML:premium_employee_detail' customer.id %}" class="btn btn-paid-candidate bt-1">View Detail</a>
                                                        {% endif %}
                                                    </div>
                                             {% endfor %}
                                        </div>
                                    </article>
                                    <script>
                                        $('[data-search3]').on('keyup', function() {
                                            var searchVal = $(this).val();
                                            var filterItems = $('[data-filter-item3]');

                                            if ( searchVal !== '' ) {
                                                filterItems.addClass('hidden');
                                                $('[data-filter-item3][data-filter-name3*="' + searchVal.toLowerCase() + '"]').removeClass('hidden');
                                            } else {
                                                filterItems.removeClass('hidden');
                                            }
                                        });
                                        $('#sortselectpremium').change(function () {
                                            var ascending = false;
                                            if($(this).val().toLowerCase() === 'az'){
                                                var sorted = $('.c_premium').sort(function(a,b){
                                                    return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? 1 : -1;
                                                });
                                                ascending = ascending ? false : true;
                                                $('#listpremium').html(sorted);
                                            }else if ($(this).val().toLowerCase() === 'za'){
                                                var sortedd = $('.c_premium').sort(function(a,b){
                                                    return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? -1 : 1;
                                                });
                                                ascending = ascending ? true : false;
                                                $('#listpremium').html(sortedd);
                                            }
                                        });
                                        $(function () {
                                            $(".c_premium").slice(0, 4).show();
                                            $("#loadpremium").on('click', function (e) {
                                                e.preventDefault();
                                                $(".c_premium:hidden").slice(0, 4).slideDown(function () {

                                                });
                                                if ($(".c_premium:hidden").length === 0) {
                                                    $("#loadpremium").fadeOut('slow');
                                                }
                                                $("#tabcont").animate({ scrollTop: $('#tabcont').prop("scrollHeight")}, 1500);
                                                {##}
                                            });
                                        });
                                     </script>

{#                                    {% if premium_customers.count >= 6 %}#}
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12">
                                                <div class="text-center">
                                                    <a id="loadpremium" href="#" class="btn btn-primary">Load More</a>
                                                    <a href="#listpremium" class="btn btn-primary">Back to top</a>
                                                </div>
                                            </div>
                                        </div>
{#                                    {% endif %}#}
                                  {% else %}
                                  <div class="col-sm-12" style="padding: 20px 10px; height: 100%;display: flex; justify-content: center; align-items: center;">
                                        <h3 style="text-align: center;">No Premium Candidate Selected</h3>
                                   </div>
                               {% endif %}
                            </div>
                            <div id="ultimate" class="tab-pane fade-in " style="height: 100%;">
                                <div class="row " style="display:flex; justify-content: flex-start; align-items: center; padding-left: 10px; {% if ultimate_customers|length > 0 %} visibility: visible; {% else %} visibility: hidden; {% endif %}">
                                    <div style="position: relative;">
                                        <input data-search4 aria-label="lll1" id="searchdashultimate" style="background-color: white;z-index: 5; padding: 15px; width: 250px; border-radius: 6px; position:relative;" type="text" class="form-control whitee" placeholder="Search">
                                    </div>
                                    <div class="col-sm-1" style="padding-right: 0;">
                                      <select id="sortselectultimate" class="form-control form-control-sm" style="">
                                          <option selected>Sort</option>
                                          <option value="az">A to Z</option>
                                          <option value="za">Z to A</option>
                                      </select>
                                    </div>
                                </div>
                                <script>
                                        $('[data-search4]').on('keyup', function() {
                                            var searchVal = $(this).val();
                                            var filterItems = $('[data-filter-item4]');

                                            if ( searchVal != '' ) {
                                                filterItems.addClass('hidden');
                                                $('[data-filter-item4][data-filter-name4*="' + searchVal.toLowerCase() + '"]').removeClass('hidden');
                                            } else {
                                                filterItems.removeClass('hidden');
                                            }
                                        });
                                        $('#sortselectultimate').change(function () {
                                            var ascending = false;
                                            if($(this).val().toLowerCase() === 'az'){
                                                var sorted = $('.c_ultimate').sort(function(a,b){
                                                    return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? 1 : -1;
                                                });
                                                ascending = ascending ? false : true;
                                                $('#listultimate').html(sorted);
                                            }else if ($(this).val().toLowerCase() === 'za'){
                                                var sortedd = $('.c_ultimate').sort(function(a,b){
                                                    return (ascending === ($(a).data('sort').toLowerCase() < $(b).data('sort').toLowerCase())) ? -1 : 1;
                                                });
                                                ascending = ascending ? true : false;
                                                $('#listultimate').html(sortedd);
                                            }
                                        });
                                        $(function () {
                                            $(".c_ultimate").slice(0, 4).show();
                                            $("#loadultimate").on('click', function (e) {
                                                e.preventDefault();
                                                $(".c_ultimate:hidden").slice(0, 4).slideDown(function () {

                                                });
                                                if ($(".c_ultimate:hidden").length === 0) {
                                                    $("#loadultimate").fadeOut('slow');
                                                }
                                                $("#tabcont").animate({ scrollTop: $('#tabcont').prop("scrollHeight")}, 1500);
                                                {##}
                                            });
                                        });
                                     </script>
                                {% if  ultimate_customers|length > 0 %}
                                    <article class="advance-search-job">
                                        <div id="listultimate" class="row no-mrg"  style="display: flex; justify-content: center; flex-wrap: wrap;">

                                             {% for customer in ultimate_customers %}
                                               <div class="modal fade" id="ultimate{{ customer.id }}" tabindex="-1" role="dialog" aria-labelledby="ultimate{{ customer.id }}" aria-hidden="true">
                                                  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                                    <div class="modal-content" style="padding-bottom: 0;">
                                                      <div class="modal-header">
                                                        <h5 class="modal-title" id="exampleModalCenterTitle">Review {{ customer.first_name|title }} {{ customer.last_name|title }}</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                          <span aria-hidden="true">&times;</span>
                                                        </button>
                                                      </div>
                                                      <div class="modal-body " style="padding: 15px">
    {#                                                      <div class="container-fluid">#}
                                                              <form action="{% url 'LML:review_shortlisted_customer' %}" method="post" enctype="multipart/form-data">
                                                              {% csrf_token %}
                                                              <input name="customer" type="text" hidden value="{{ customer.id }}">
                                                              <input name="company" type="text" hidden value="{{ request.user.id }}">
                                                              <div class="card-ratings-wrapper" style="display: flex; flex-direction: column; margin-bottom: 20px;">
                                                                <label for="exampleInputsd">Ratings</label>
                                                                <div class="rate" style="margin-right: auto;">
                                                                    <input type="radio" id="star5{{ customer.id }}" name="ratings" value="5" />
                                                                        <label for="star5{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="5 Stars">5 stars</label>
                                                                    <input type="radio" id="star4{{ customer.id }}" name="ratings" value="4" />
                                                                        <label for="star4{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="4 Stars">4 stars</label>
                                                                    <input type="radio" id="star3{{ customer.id }}" name="ratings" value="3" />
                                                                        <label for="star3{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="3 Stars">3 stars</label>
                                                                    <input type="radio" id="star2{{ customer.id }}" name="ratings" value="2" />
                                                                        <label for="star2{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="2 Stars">2 stars</label>
                                                                    <input type="radio" id="star1{{ customer.id }}" name="ratings" value="1" />
                                                                        <label for="star1{{ customer.id }}" data-toggle="tooltip" data-placement="top" title="1 Stars">1 star</label>
                                                                </div>
                                                                <small id="emailHelp" class="form-text text-muted">Rate Out of 5</small>
                                                              </div>
                                                              <div class="form-group" >
                                                                <label for="allultimatetextarea{{ customer.id }}">Review Message</label>
                                                                <textarea required rows="20" style="max-width: 100%" class="form-control" name="message" id="allultimatetextarea{{ customer.id }}" ></textarea>
                                                                <small id="emailHelp" class="form-text text-muted">Thought about this candidate</small>
                                                              </div>
                                                              <div class="col-sm-12 row">
                                                                  <button type="submit" class="update-btn custom-button btn-sm" style="border-radius: 140px; margin: 0 auto; padding: 10px">Review</button>
                                                              </div>
                                                              <script>
                                                                   CKEDITOR.replace( 'allultimatetextarea{{ customer.id }}' );
                                                              </script>
                                                          </form>
    {#                                                      </div>#}
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>

                                                <div data-parentorall="custm-{{ customer.id }}" data-filter-item4 style="display: none;" data-sort="{{ customer.first_name }}" data-filter-name4="{{ customer.first_name|lower }} {{ customer.last_name|lower }}" class="c_ultimate paid-candidate-container">
                                                    <div class="paid-candidate-box card-custom-border">
                                                        {% if request.user.is_authenticated %}
                                                            {% if request.user|logged_in_company %}
                                                                <span class="tpc-status {% if customer.rank_status == "BASIC" %} bg-primary {% elif customer.rank_status == "PREMIUM" %} bg-success {% elif customer.rank_status == "ULTIMATE" %} bg-warning {% else %} bg-secondary {% endif %}">{{ customer.rank_status }}</span>
                                                            {% endif %}
                                                        {% endif %}
                                                        <div class="dropdown">
                                                            <div class="btn-group fl-right">
                                                                {% if request.user|logged_in_company %}
                                                                    <button type="button" class="btn-trans" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-gear"></i></button>
                                                                    <div class="dropdown-menu pull-right animated flipInX">
                                                                        {% csrf_token %}

                                                                        <a data-idparent="custm-{{ customer.id }}" id="custm{{ customer.id }}" onclick="unshortlist(this);" data-customer="{{ customer.id }}" data-company="{{ request.user.id }}" href="javascript:void(0)">UnShortlisted</a>
                                                                        <a  data-customer="{{ customer.username }}" id="kk{{ customer.id }}" href="#">Chat</a>
                                                                        <a href="javascript:void(0)" data-toggle="modal" data-target="#ultimate{{ customer.id }}">Review</a>
                                                                         <!-- Modal -->

                                                                        <script>

                                                                            document.querySelector('#kk{{ customer.id }}').onclick = function(e) {
                                                                                var roomName = document.getElementById('kk{{ customer.id }}').getAttribute('data-customer');
                                                                                window.location.pathname = 'employerdash_message/' + roomName + '/';
                                                                            };
                                                                            function unshortlist(me) {
                                                                                var cust_id= me.id;
                                                                                var data_parent= me.dataset.idparent;
                                                                                var company = me.dataset.company;
                                                                                var customer = me.dataset.customer;
                                                                                console.log(company, customer);
                                                                                $.ajax({
                                                                                    type: "POST",
                                                                                    url : "{% url 'LML:unshortlistemployees' %}",
                                                                                    data:{
                                                                                        'customer_id' : customer,
                                                                                        'company_id' : company,
                                                                                        'csrfmiddlewaretoken': $("input[name=csrfmiddlewaretoken]").val(),
                                                                                    },
                                                                                    dataType:'json',
                                                                                    success : function searchSuccess(data){
                                                                                        console.log(data);
                                                                                        if(data.is_shortlisted){
                                                                                            errorshortlisting(data);

                                                                                        }
                                                                                        else if(data.shortlisted){
                                                                                            $( "[data-parentorall="+ data_parent +"]" ).fadeOut();

                                                                                           setTimeout(function () {
                                                                                               shortlisted(data);
                                                                                           }, 1200);
                                                                                        }
                                                                                    },

                                                                                });
                                                                                function shortlisted(k){

                                                                                    swal.fire({
                                                                                    title: "Success!",
                                                                                    text: k.success_message,
                                                                                    type: "success",
                                                                                    confirmButtonText: "Continue"
                                                                                   });
                                                                                }
                                                                                 function errorshortlisting(k){
                                                                                    swal.fire({
                                                                                    title: "Error!",
                                                                                    text: k.error_message,
                                                                                    type: "error",
                                                                                    confirmButtonText: "Continue"
                                                                                   });
                                                                                }


                                                                            }
                                                                        </script>
                                                                    </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                        <div class="paid-candidate-inner--box">
                                                            <div class="paid-candidate-box-thumb" style="height: 131px !important;"><img style="height: 100%; width: 100%; max-width: 100%;" src="{{customer.profile_image.url}}" class="img-responsive img-circle" alt="" /></div>
                                                            <div class="paid-candidate-box-detail">
                                                                <h4 class="text-capitalize">{{customer.first_name}} {{customer.last_name}}</h4>
                                                                <span class="desination text-capitalize">{{customer.category.category}}</span>
                                                            </div>
                                                        </div>
                                                        <div class="paid-candidate-box-extra">
                                                            <ul style="height: 100px; display: flex; flex-wrap: wrap; justify-content: center; align-items: center;">
                                                                {% for skill in customer.skillset %}
                                                                <li style="height: 30px;">{{skill.skill}}</li>
                                                                {% endfor %}
                                                                {% if customer.skillcount %}
                                                                    <li style="height: 30px;" class="more-skill bg-primary">+{{customer.skillcount}}</li>
                                                                {% endif %}
                                                            </ul>
                                                            <p>{{customer.biography|truncatechars:20}}.</p>
                                                        </div>
                                                    </div>
                                                    {% if request.user|logged_in_company %}
                                                        <a href="{% url 'LML:premium_employee_detail' customer.id %}" class="btn btn-paid-candidate bt-1">View Detail</a>
                                                    {% endif %}
                                                </div>

                                             {% endfor %}
                                        </div>
                                    </article>
                                    {% if ultimate_customers.count >= 6 %}
                                        <div class="row">
                                        <div class="col-md-12 col-sm-12">
                                            <div class="text-center">
                                                <a id="loadultimate" href="#" class="btn btn-primary">Load More</a>
                                                <a href="#listultimate" class="btn btn-primary">Back to top</a>
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                  {% else %}
                                  <div class="col-sm-12" style="padding: 20px 10px; height: 100%;display: flex; justify-content: center; align-items: center;">
                                        <h3 style="text-align: center;">No Ultimate Candidate Selected</h3>
                                   </div>
                               {% endif %}
                            </div>
                            <div id="analystics" class="tab-pane fade-in " style="height: 100%; overflow:hidden;">
                                <div class="col-sm-12" style="height: 100%; overflow:hidden; padding: 0">
                                    <div class="deatil-tab-employ tool-tab col-sm-12 col-md-12 col-lg-10 " style="background: white; width: 100%; height: 100%; overflow:hidden;" >
                                        <ul class="nav simple nav-tabs" id="simple-design2">
                                            <li class=""><a  data-toggle="tab" href="#bargr">Bar Stats</a></li>
                                            <li class="active"><a  data-toggle="tab" href="#linegr">Line Stats</a></li>
                                        </ul>
                                        <div class="tab-content" style="height: 100%;">
                                            <div id="bargr"  role="tabpanel" class="tab-pane fade " >
                                                 <article class="advance-search-job" style="margin: 0; padding: 0;">
                                                    <div class="row no-mrg" >
                                                        <canvas class="col-sm-12" id="customers2" >

                                                        </canvas>
                                                    </div>
                                                </article>
                                            </div>
                                            <div id="linegr"  role="tabpanel" class="tab-pane fade active" style="" >
                                                 <article class="advance-search-job" style=" margin: 0; padding: 0;">
                                                    <div class="row no-mrg">
                                                        <canvas class="col-sm-12" id="customers">

                                                        </canvas>
                                                    </div>
                                                </article>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="about" class="tab-pane fade-in " style="height: 100%;">
                                <div class="col-sm-12" style="padding: 20px 10px; height: 100%;display: flex; justify-content: center; align-items: center;">
                                    <h3 style="text-align: center;">No Payment Made</h3>
                                </div>
                            </div>
                            <!-- End About Sec -->
                        </div>
                          <!-- End Settings -->
                   </div>
                </div>
            </div>

{#        </div>#}
        </div>


    </section>
{#    <div class="clearfix"></div>#}
    <!-- ========== Begin: Brows job Category End ===============  -->
{% endblock content %}
{% block script %}


     <script>
        $(function(){
            $(".customer").slice(0, 6).show(); // select the first ten
            $("#load").click(function(e){ // click event for load more
                e.preventDefault();
                $(".customer:hidden").slice(0, 6).show(); // select next 10 hidden divs and show them
                if($(".customer:hidden").length == 0){ // check if any hidden divs still exist
                    spinner.hide();
                    swal.fire({
                        title: "Error!",
                        text: "No more categories to load",
                        type: "error",
                        confirmButtonText: "Retry"
                    });
                }
            });
            {#$('a[href=#top]').click(function () {#}
            {#    $('body,html').animate({#}
            {#        scrollTop: 0#}
            {#    }, 600);#}
            {#    return false;#}
            //});

            $(window).scroll(function () {
                if ($(this).scrollTop() > 50) {
                    $('.totop a').fadeIn();
                } else {
                    $('.totop a').fadeOut();
                }
            });
        });

    </script>
    <script>
       $(document).ready(function(){

            $('a[data-toggle="pill"]').on('show.bs.tab', function(e) {
                console.log('yess');
                localStorage.setItem('activeTab5', $(e.target).attr('href'));
            });
            let activeTab = localStorage.getItem('activeTab5');
            if(activeTab){
                $('#simple-design-tab1 a[href="' + activeTab + '"]').tab('show');
            }
        });
       $(document).ready(function(){

            $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
                console.log('yess');
                localStorage.setItem('activeTab6', $(e.target).attr('href'));
            });
            let activeTab = localStorage.getItem('activeTab6');
            if(activeTab){
                $('#simple-design2 a[href="' + activeTab + '"]').tab('show');
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script>
        $(document).load(function () {
            getUsersData();
        })

        function getUsersData() {
            var endpoint = '{% url 'LML:employee_shortlist_graph' %}';
            var defaultData =  [];
            var labels = [];
            $.ajax({
                method: "GET",
                url : endpoint,
                success : function (data) {
                    labels = data.labels2;
                    defaultData= data.defaultData2;
                    setCustomerLine(labels, defaultData);
                    setCustomerBar(labels, defaultData);
                    // console.log(data);
                },
                error : function (error_data) {
                    console.log(error);
                    console.log(error_data);
                },
            });
        }
        getUsersData();
        function setCustomerLine(x, y){
            var ctx = document.getElementById('customers').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: x,
                datasets: [{
                    label: 'Candidate Shortlist Line',
                    data: y,
                    backgroundColor: [
                         'rgb(7, 177, 7, 50)',
                        'rgba(255, 159, 64, 1)',

                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(7, 177, 7)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                    ],
                    borderColor: [
                        'rgba(255, 159, 64, 1)',
                        'rgb(7, 177, 7, 50)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(7, 177, 7)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            stepSize: 1,
                        }
                    }]
                }
            }
        });
        }
        function  setCustomerBar(x, y){
             var ctx = document.getElementById('customers2').getContext('2d');
            var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: x,
                datasets: [{
                    label: 'Candidate Shortlist Bar',
                    data: y,
                    backgroundColor: [
                         'rgb(7, 177, 7, 50)',
                        'rgba(255, 159, 64, 1)',

                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(7, 177, 7)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',
                    ],
                    borderColor: [
                        'rgba(255, 159, 64, 1)',
                        'rgb(7, 177, 7, 50)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgb(129,255,46)',
                        'rgb(255,217,66)',
                        'rgb(255,131,255)',
                        'rgb(1,53,255)',
                        'rgb(7, 177, 7)',
                        'rgb(36,255,221)',
                        'rgb(145,255,39)',

                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true,
                            stepSize: 1,
                        }
                    }]
                }
            }
        });
        }


    </script>
{#<div class="search_wrapper" id="search_wrapper">#}
{#    <ul>#}
{#        <li>#}
{#            <a href=""> <span>Eugene</span> <i class="fa fa-caret-right"></i></a>#}
{#        </li>#}
{#         <li>#}
{#            <a href=""> <span>Eugene</span> <i class="fa fa-caret-right"></i></a>#}
{#        </li>#}
{#    </ul>#}
{#</div>#}

{% endblock script %}